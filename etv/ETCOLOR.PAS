USES CRT,_TOOLS,_FONT,STR_FUNC;

CONST ME:ARRAY[0..8] OF STRING[18]=(
'               ',
'      ',
'   ',
'  .   ',
' .   ',
'   ',
'  .   ',
'         ',
'             ');

VAR C:CHAR;
	CM:BYTE;
	OC:BYTE;

PROCEDURE WRITEC_(S:STRING; B,C:BYTE; LN_:BOOLEAN);
BEGIN
TEXTATTR:=B SHL 4+C;
GOTOXY(40-LENGTH(S) DIV 2,WHEREY);WRITE(S); IF LN_ THEN WRITELN;
END;

PROCEDURE DISPLAYIT;
BEGIN
WINDOW_(1,1,78,10);
WRITEC_('  ...',BACK,CHEADER,TRUE);
TEXTCOLOR(CFRAME); WRITE(CHAR_REPL(MAXX+2,''));
WRITEC_('    ...',BACK,NORM,TRUE);
WRITEC_('    () ...',BACK,SELECT,TRUE);
WRITEC_('    ...',BACK,COMMENT,TRUE);
WRITEC_('    ...',BACK,SHADOW,TRUE);
WRITEC_('    ...',MBACK,MSELECT,FALSE);
END;

PROCEDURE SHOWMENU(N:BYTE);
VAR I:BYTE;
BEGIN
FOR I:=0 TO 8 DO BEGIN
IF I=N THEN TEXTATTR:=3 SHL 4+14 ELSE TEXTATTR:=1 SHL 4+7;
GOTOXY(3,I+2);WRITE(ME[I]);
END;
END;

PROCEDURE SHOWCT(C,B:BYTE);
VAR I,J:BYTE;
BEGIN
TEXTATTR:=1 SHL 4+15;GOTOXY(25,2);WRITE('           --<<<   >>>--           ');
FOR J:=0 TO 7 DO FOR I:=0 TO 15 DO
BEGIN
GOTOXY(25+I*3,J+3);
TEXTATTR:=J SHL 4+I;
IF (C MOD 16=I) AND (B MOD 8=J) THEN
BEGIN
TEXTATTR:=15;WRITE('<');
TEXTATTR:=J SHL 4+I;
WRITE('');
TEXTATTR:=15;WRITE('>');
END ELSE WRITE('<>');
END;
END;

PROCEDURE BINM;
BEGIN
box(3,13,20,11,15+1 SHL 4);
box(25,13,50,11,7+1 SHL 4);
END;

PROCEDURE BINC;
BEGIN
box(3,13,20,11,7+1 SHL 4);
box(25,13,50,11,15+1 SHL 4);
END;

BEGIN
CHECKBREAK:=FALSE;
LOADATTR;
HIDECURSOR;
DISPLAYIT;
CM:=0;
WINDOW_(1,12,78,13);BINM;
SHOWCT(15,BACK);
SHOWMENU(CM);
REPEAT
C:=READKEY;
CASE C OF
'S','s','','':SAVEATTR;
'L','l','','':LOADATTR;
#072:IF CM>0 THEN BEGIN DEC(CM);SHOWMENU(CM);
CASE CM OF
0:SHOWCT(15,BACK);
1:SHOWCT(NORM,BACK);
2:SHOWCT(SELECT,BACK);
3:SHOWCT(COMMENT,BACK);
4:SHOWCT(SHADOW,BACK);
5:SHOWCT(MSELECT,MBACK);
6:SHOWCT(15,MBACK);
7:SHOWCT(CHEADER,BACK);
8:SHOWCT(CFRAME,BACK);
END;
END;
#080:IF CM<8 THEN BEGIN INC(CM);SHOWMENU(CM);
CASE CM OF
0:SHOWCT(15,BACK);
1:SHOWCT(NORM,BACK);
2:SHOWCT(SELECT,BACK);
3:SHOWCT(COMMENT,BACK);
4:SHOWCT(SHADOW,BACK);
5:SHOWCT(MSELECT,MBACK);
6:SHOWCT(15,MBACK);
7:SHOWCT(CHEADER,BACK);
8:SHOWCT(CFRAME,BACK);
END;
END;
#13:BEGIN
BINC;
CASE CM OF
0:BEGIN OC:=BACK;SHOWCT(15,BACK);END;
1:BEGIN OC:=NORM;SHOWCT(NORM,BACK);END;
2:BEGIN OC:=SELECT;SHOWCT(SELECT,BACK);END;
3:BEGIN OC:=COMMENT;SHOWCT(COMMENT,BACK);END;
4:BEGIN OC:=SHADOW;SHOWCT(SHADOW,BACK);END;
5:BEGIN OC:=MSELECT;SHOWCT(MSELECT,MBACK);END;
6:BEGIN OC:=MBACK;SHOWCT(15,MBACK);END;
7:BEGIN OC:=CHEADER;SHOWCT(CHEADER,BACK);END;
8:BEGIN OC:=CFRAME;SHOWCT(CFRAME,BACK);END;
END;
 REPEAT
C:=READKEY;
CASE C OF
#075:IF CM IN [1..5,7..8] THEN
BEGIN
CASE CM OF
1:IF NORM>0 THEN BEGIN
	DEC(NORM);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(NORM,BACK);
	SHOWMENU(CM);END;
2:IF SELECT>0 THEN BEGIN
	DEC(SELECT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(SELECT,BACK);
	SHOWMENU(CM);END;
3:IF COMMENT>0 THEN BEGIN
	DEC(COMMENT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(COMMENT,BACK);
	SHOWMENU(CM);END;
4:IF SHADOW>0 THEN BEGIN
	DEC(SHADOW);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(SHADOW,BACK);
	SHOWMENU(CM);END;
5:IF MSELECT>0 THEN BEGIN
	DEC(MSELECT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(MSELECT,MBACK);
	SHOWMENU(CM);END;
7:IF CHEADER>0 THEN BEGIN
	DEC(CHEADER);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(CHEADER,BACK);
	SHOWMENU(CM);END;
8:IF CFRAME>0 THEN BEGIN
	DEC(CFRAME);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(CFRAME,BACK);
	SHOWMENU(CM);END;
END;
END;
#077:IF CM IN [1..5,7..8] THEN
BEGIN
CASE CM OF
1:IF NORM<15 THEN BEGIN
	INC(NORM);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(NORM,BACK);
	SHOWMENU(CM);END;
2:IF SELECT<15 THEN BEGIN
	INC(SELECT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(SELECT,BACK);
	SHOWMENU(CM);END;
3:IF COMMENT<15 THEN BEGIN
	INC(COMMENT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(COMMENT,BACK);
	SHOWMENU(CM);END;
4:IF SHADOW<15 THEN BEGIN
	INC(SHADOW);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(SHADOW,BACK);
	SHOWMENU(CM);END;
5:IF MSELECT<15 THEN BEGIN
	INC(MSELECT);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(MSELECT,MBACK);
	SHOWMENU(CM);END;
7:IF CHEADER<15 THEN BEGIN
	INC(CHEADER);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(CHEADER,BACK);
	SHOWMENU(CM);END;
8:IF CFRAME<15 THEN BEGIN
	INC(CFRAME);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(CFRAME,BACK);
	SHOWMENU(CM);END;
END;
END;
#072:IF CM IN [0,6] THEN
BEGIN
CASE CM OF
0:IF BACK>0 THEN BEGIN
	DEC(BACK);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(15,BACK);
	SHOWMENU(CM);END;
6:IF MBACK>0 THEN BEGIN
	DEC(MBACK);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(15,MBACK);
	SHOWMENU(CM);END;
END;
END;
#080:IF CM IN [0,6] THEN
BEGIN
CASE CM OF
0:IF BACK<7 THEN BEGIN
	INC(BACK);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(15,BACK);
	SHOWMENU(CM);END;
6:IF MBACK<7 THEN BEGIN
	INC(MBACK);
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWCT(15,MBACK);
	SHOWMENU(CM);END;
END;
END;
END;
UNTIL (C=#13) OR (C=#27);
IF C=#27 THEN
BEGIN
CASE CM OF
0:BEGIN BACK:=OC;SHOWCT(15,BACK);END;
1:BEGIN NORM:=OC;SHOWCT(NORM,BACK);END;
2:BEGIN SELECT:=OC;SHOWCT(SELECT,BACK);END;
3:BEGIN COMMENT:=OC;SHOWCT(COMMENT,BACK);END;
4:BEGIN SHADOW:=OC;SHOWCT(SHADOW,BACK);END;
5:BEGIN MSELECT:=OC;SHOWCT(MSELECT,MBACK);END;
6:BEGIN MBACK:=OC;SHOWCT(15,MBACK);END;
7:BEGIN CHEADER:=OC;SHOWCT(CHEADER,BACK);END;
8:BEGIN CFRAME:=OC;SHOWCT(CFRAME,BACK);END;
END;
	DISPLAYIT;
	WINDOW_(1,12,78,13);BINC;
	SHOWMENU(CM);
CASE CM OF
0:BEGIN BACK:=OC;SHOWCT(15,BACK);END;
1:BEGIN NORM:=OC;SHOWCT(NORM,BACK);END;
2:BEGIN SELECT:=OC;SHOWCT(SELECT,BACK);END;
3:BEGIN COMMENT:=OC;SHOWCT(COMMENT,BACK);END;
4:BEGIN SHADOW:=OC;SHOWCT(SHADOW,BACK);END;
5:BEGIN MSELECT:=OC;SHOWCT(MSELECT,MBACK);END;
6:BEGIN MBACK:=OC;SHOWCT(15,MBACK);END;
7:BEGIN CHEADER:=OC;SHOWCT(CHEADER,BACK);END;
8:BEGIN CFRAME:=OC;SHOWCT(CFRAME,BACK);END;
END;
END;
C:=#1;
END;
END;
UNTIL C=#27;
TEXTMODE(3);
END.